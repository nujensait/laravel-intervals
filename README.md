# Laravel Intervals

Консольное приложение для работы с интервалами в Laravel.

## Оглавление
- [Описание задачи](#описание-задачи)
- [Требования](#требования)
- [Установка](#установка)
- [Использование](#использование)
- [Структура проекта](#структура-проекта)
- [Реализация](#реализация)

## Описание задачи

Реализация консольной artisan-команды в Laravel для работы с интервалами.

Задача предполагает создание системы, которая хранит в базе данных числовые интервалы (отрезки и лучи) и позволяет находить те из них, которые пересекаются с заданным интервалом.

## Требования

- PHP 8.0 или выше
- Laravel 8.x или выше
- MySQL 5.7+ / PostgreSQL 10+ / SQLite 3

## Установка

1. Клонировать репозиторий:
   ```bash
   git clone https://github.com/your-username/laravel-intervals.git
   ```

2. Перейти в директорию проекта:
   ```bash
   cd laravel-intervals
   ```

3. Установить зависимости:
   ```bash
   composer install
   ```

4. Скопировать файл конфигурации и настроить подключение к базе данных:
   ```bash
   cp .env.example .env
   ```

5. Сгенерировать ключ приложения:
   ```bash
   php artisan key:generate
   ```

6. Выполнить миграции для создания таблицы intervals:
   ```bash
   php artisan migrate
   ```

7. Заполнить базу данных тестовыми интервалами (10,000 записей):
   ```bash
   php artisan db:seed
   ```

## Использование

Для поиска интервалов, пересекающихся с заданным интервалом [N, M], используйте команду:

```bash
php artisan intervals:list --left=N --right=M
```

Например, чтобы найти все интервалы, пересекающиеся с [15, 30]:

```bash
php artisan intervals:list --left=15 --right=30
```

Результат будет выведен в виде таблицы:

```
+------+-------+----------+----------+
| ID   | Start | End      | Type     |
+------+-------+----------+----------+
| 12   | 10    | 20       | Segment  |
| 45   | 25    | 40       | Segment  |
| 78   | 5     | Infinity | Ray      |
| ...  | ...   | ...      | ...      |
+------+-------+----------+----------+
```

## Структура проекта

- `app/Models/Interval.php` - модель данных для работы с интервалами
- `app/Console/Commands/IntervalsList.php` - artisan-команда для вывода интервалов
- `database/migrations/..._create_intervals_table.php` - миграция для создания таблицы
- `database/seeders/IntervalsTableSeeder.php` - сидер для заполнения тестовыми данными

## Реализация

### Таблица интервалов

```sql
CREATE TABLE intervals (
    id SERIAL PRIMARY KEY,
    start INTEGER NOT NULL,  -- начало отрезка
    end INTEGER DEFAULT NULL -- конец отрезка или NULL для луча
);
```

### Поиск пересечений

Интервал [a, b] пересекается с интервалом [c, d], если:
- Для отрезков: a ≤ d И b ≥ c
- Для лучей (с конечной точкой d = ∞): a ≤ start

В реализации используется оптимизированный SQL-запрос для поиска пересечений с использованием Laravel Query Builder.
